local getmetatable=debug and debug.getmetatable or getmetatable
return function(x) return ((type(x)=='table' or type(x)=='userdata') and (type((getmetatable(x) or {}).__toJSON or (getmetatable(x) or {}).__tojson)=='function')) end